<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Ejercicios Interactivos</title>
  <style>
    /* ==================== Estilos bÃ¡sicos MOBILE-FIRST ==================== */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      max-width: 480px;  /* Para que en desktop se vea centrado. Mobile-first real. */
      margin: auto;
      padding: 10px;
    }
    h1, h2 {
      text-align: center;
      margin: 20px 0 10px 0;
    }
    h3 {
      margin: 10px 0;
    }

    /* Contenedor genÃ©rico de cada pantalla/ejercicio */
    .pantalla {
      display: none; /* Ocultamos todas por defecto, se mostrarÃ¡ la activa con JS */
      min-height: 80vh; /* Para que ocupe casi toda la pantalla */
      background: #fff;
      margin: 10px 0;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      position: relative; /* Para botones â€œSiguienteâ€ o â€œAnteriorâ€ */
    }

    /* BotÃ³n de navegaciÃ³n */
    .btn-nav {
      display: inline-block;
      background: #007bff;
      color: #fff;
      padding: 10px 20px;
      border-radius: 6px;
      text-decoration: none;
      margin: 20px 10px 0 10px;
      text-align: center;
      cursor: pointer;
    }
    .btn-nav:hover {
      background: #0056b3;
    }

    /* RetroalimentaciÃ³n */
    .retro {
      margin-top: 8px;
      font-weight: bold;
    }
    .error {
      color: red;
    }
    .correcto {
      color: green;
    }

    /* Estilos para OpciÃ³n MÃºltiple */
    .opciones {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 10px 0;
    }
    .opcion {
      background: #e9e9e9;
      padding: 10px;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
    }
    .opcion:hover {
      background: #ddd;
    }

    /* Estilos para Verdadero/Falso */
    .verdadero-falso {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    /* Estilos Relacionar Columnas (Drag & Drop) */
    .zona-drag-drop {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin: 10px 0;
    }
    .item-drag {
      background: #fafafa;
      border: 2px dashed #aaa;
      border-radius: 5px;
      padding: 10px;
      min-width: 120px;
      text-align: center;
      cursor: grab;
    }
    .item-drag:active {
      cursor: grabbing;
    }
    .zona-drop {
      background: #fefefe;
      border: 2px dashed #ddd;
      border-radius: 5px;
      min-height: 40px;
      min-width: 120px;
      padding: 10px;
      text-align: center;
    }

    /* Ã“rbita Interactiva de la Luna */
    .orbita-contenedor {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 20px auto;
      background: #c5e3ff;
      border-radius: 50%;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }
    .tierra {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
    }
    .luna {
      position: absolute;
      width: 40px; height: 40px;
      font-size: 2rem;
      cursor: pointer;
      user-select: none;
      transform: translate(-50%, -50%);
      top: 50%; left: 90%;
    }

    /* Reordenar Planetas */
    .reordenar-contenedor {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    .planeta, .espacio-planeta {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px;
      text-align: center;
      width: 80%;
      max-width: 300px;
      margin: 0 auto;
    }
    .planeta {
      cursor: grab;
    }
    .planeta:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>

  <h1>ğŸŒŸ Ejercicios Interactivos ğŸŒŸ</h1>

  <!-- PANTALLA 1: OpciÃ³n MÃºltiple (Sistema Solar) -->
  <section class="pantalla" id="pantalla1">
    <h2>1ï¸âƒ£ OpciÃ³n MÃºltiple: Sistema Solar</h2>
    <h3>Â¿De dÃ³nde viene la luz de la Luna? ğŸŒ™</h3>
    <div class="opciones" data-correcta="Del Sol">
      <div class="opcion">De la Tierra</div>
      <div class="opcion">De Marte</div>
      <div class="opcion">Del Sol</div>
      <div class="opcion">De JÃºpiter</div>
    </div>
    <div class="retro"></div>

    <h3>Â¿CuÃ¡l es la estrella mÃ¡s grande de nuestro sistema solar? ğŸŒŸ</h3>
    <div class="opciones" data-correcta="El Sol">
      <div class="opcion">La Luna</div>
      <div class="opcion">Saturno</div>
      <div class="opcion">El Sol</div>
      <div class="opcion">Urano</div>
    </div>
    <div class="retro"></div>

    <h3>Â¿CuÃ¡ntos planetas giran alrededor del Sol? ğŸª</h3>
    <div class="opciones" data-correcta="8">
      <div class="opcion">7</div>
      <div class="opcion">8</div>
      <div class="opcion">9</div>
      <div class="opcion">10</div>
    </div>
    <div class="retro"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(2)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 2: Ã“rbita Interactiva de la Luna -->
  <section class="pantalla" id="pantalla2">
    <h2>2ï¸âƒ£ Ã“rbita Interactiva de la Luna ğŸŒ</h2>
    <p>Arrastra la Luna alrededor de la Tierra para ver las fases.</p>
    <div class="orbita-contenedor" id="orbitaContenedor">
      <div class="tierra">ğŸŒ</div>
      <div class="luna" id="lunaEmoji">ğŸŒ•</div>
    </div>
    <div class="retro" id="faseTexto"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(1)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(3)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 3: Relacionar Columnas (Estaciones) -->
  <section class="pantalla" id="pantalla3">
    <h2>3ï¸âƒ£ Relacionar: Estaciones del AÃ±o ğŸ‚</h2>
    <p>Arrastra la estaciÃ³n hacia la descripciÃ³n correcta:</p>
    <div class="zona-drag-drop">
      <div class="item-drag" draggable="true" data-match="Primavera">Primavera ğŸŒ¼</div>
      <div class="item-drag" draggable="true" data-match="Verano">Verano â˜€ï¸</div>
      <div class="item-drag" draggable="true" data-match="OtoÃ±o">OtoÃ±o ğŸ‚</div>
      <div class="item-drag" draggable="true" data-match="Invierno">Invierno â„ï¸</div>
    </div>
    <div class="zona-drag-drop">
      <div class="zona-drop" data-expect="Primavera">[Flores y Ã¡rboles verdes]</div>
      <div class="zona-drop" data-expect="Verano">[NiÃ±os en la playa]</div>
      <div class="zona-drop" data-expect="OtoÃ±o">[Hojas secas]</div>
      <div class="zona-drop" data-expect="Invierno">[Nieve y frÃ­o]</div>
    </div>
    <div class="retro" id="retroEstaciones"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(2)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(4)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 4: Relacionar Columnas (Fases de la Luna) -->
  <section class="pantalla" id="pantalla4">
    <h2>4ï¸âƒ£ Relacionar: Fases de la Luna ğŸŒ–</h2>
    <p>Arrastra el nombre de la fase a su emoji:</p>
    <div class="zona-drag-drop">
      <div class="item-drag" draggable="true" data-match="Luna Nueva">Luna Nueva</div>
      <div class="item-drag" draggable="true" data-match="Cuarto Creciente">Cuarto Creciente</div>
      <div class="item-drag" draggable="true" data-match="Luna Llena">Luna Llena</div>
      <div class="item-drag" draggable="true" data-match="Cuarto Menguante">Cuarto Menguante</div>
    </div>
    <div class="zona-drag-drop">
      <div class="zona-drop" data-expect="Luna Nueva">ğŸŒ‘</div>
      <div class="zona-drop" data-expect="Cuarto Creciente">ğŸŒ“</div>
      <div class="zona-drop" data-expect="Luna Llena">ğŸŒ•</div>
      <div class="zona-drop" data-expect="Cuarto Menguante">ğŸŒ—</div>
    </div>
    <div class="retro" id="retroLuna"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(3)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(5)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 5: OpciÃ³n MÃºltiple (Fechas Importantes) -->
  <section class="pantalla" id="pantalla5">
    <h2>5ï¸âƒ£ OpciÃ³n MÃºltiple: Fechas Importantes ğŸ“…</h2>
    <h3>Â¿CuÃ¡ndo empieza la primavera? ğŸŒ¸</h3>
    <div class="opciones" data-correcta="20 de marzo">
      <div class="opcion">20 de junio</div>
      <div class="opcion">20 de marzo</div>
      <div class="opcion">23 de septiembre</div>
      <div class="opcion">21 de diciembre</div>
    </div>
    <div class="retro"></div>

    <h3>Â¿CuÃ¡ndo empieza el otoÃ±o? ğŸ</h3>
    <div class="opciones" data-correcta="23 de septiembre">
      <div class="opcion">21 de junio</div>
      <div class="opcion">20 de marzo</div>
      <div class="opcion">23 de septiembre</div>
      <div class="opcion">22 de diciembre</div>
    </div>
    <div class="retro"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(4)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(6)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 6: Verdadero o Falso -->
  <section class="pantalla" id="pantalla6">
    <h2>6ï¸âƒ£ Verdadero o Falso âœ…âŒ</h2>

    <div>
      <h3>La Tierra tarda 365 dÃ­as en dar una vuelta al Sol. ğŸŒ</h3>
      <div class="verdadero-falso" data-correcto="Verdadero">
        <div class="opcion">Verdadero</div>
        <div class="opcion">Falso</div>
      </div>
      <div class="retro"></div>
    </div>

    <div>
      <h3>El Sol gira alrededor de la Tierra. â˜€ï¸</h3>
      <div class="verdadero-falso" data-correcto="Falso">
        <div class="opcion">Falso</div>
        <div class="opcion">Verdadero</div>
      </div>
      <div class="retro"></div>
    </div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(5)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(7)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 7: Ordenar los Planetas -->
  <section class="pantalla" id="pantalla7">
    <h2>7ï¸âƒ£ Ordenar los Planetas ğŸª</h2>
    <p>Arrastra cada planeta a su posiciÃ³n correcta (desde el Sol hacia afuera):</p>

    <div class="reordenar-contenedor">
      <div class="planeta" draggable="true" data-orden="1">Mercurio</div>
      <div class="planeta" draggable="true" data-orden="2">Venus</div>
      <div class="planeta" draggable="true" data-orden="3">Tierra</div>
      <div class="planeta" draggable="true" data-orden="4">Marte</div>
      <div class="planeta" draggable="true" data-orden="5">JÃºpiter</div>
      <div class="planeta" draggable="true" data-orden="6">Saturno</div>
      <div class="planeta" draggable="true" data-orden="7">Urano</div>
      <div class="planeta" draggable="true" data-orden="8">Neptuno</div>
    </div>
    <br>
    <div class="reordenar-contenedor">
      <div class="espacio-planeta" data-esperado="1">Slot 1</div>
      <div class="espacio-planeta" data-esperado="2">Slot 2</div>
      <div class="espacio-planeta" data-esperado="3">Slot 3</div>
      <div class="espacio-planeta" data-esperado="4">Slot 4</div>
      <div class="espacio-planeta" data-esperado="5">Slot 5</div>
      <div class="espacio-planeta" data-esperado="6">Slot 6</div>
      <div class="espacio-planeta" data-esperado="7">Slot 7</div>
      <div class="espacio-planeta" data-esperado="8">Slot 8</div>
    </div>
    <div class="retro" id="retroPlanetas"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(6)">â¬…ï¸ Anterior</span>
      <span class="btn-nav" onclick="cambiarPantalla(8)">Siguiente â¡ï¸</span>
    </div>
  </section>

  <!-- PANTALLA 8: OpciÃ³n MÃºltiple (DÃ­as de los Meses) -->
  <section class="pantalla" id="pantalla8">
    <h2>8ï¸âƒ£ OpciÃ³n MÃºltiple: DÃ­as de los Meses ğŸ“†</h2>

    <h3>Â¿CuÃ¡ntos dÃ­as tiene febrero en un aÃ±o normal? â“</h3>
    <div class="opciones" data-correcta="28">
      <div class="opcion">27</div>
      <div class="opcion">28</div>
      <div class="opcion">29</div>
      <div class="opcion">30</div>
    </div>
    <div class="retro"></div>

    <h3>Â¿CuÃ¡ntos dÃ­as tiene diciembre? â„ï¸</h3>
    <div class="opciones" data-correcta="31">
      <div class="opcion">28</div>
      <div class="opcion">29</div>
      <div class="opcion">30</div>
      <div class="opcion">31</div>
    </div>
    <div class="retro"></div>

    <div>
      <span class="btn-nav" onclick="cambiarPantalla(7)">â¬…ï¸ Anterior</span>
      <!-- PodrÃ­as cerrar o repetir, aquÃ­ termina -->
    </div>
  </section>

  <script>
  /*****************************************************
   * Control de Pantallas: Mostrar solo la activa
   *****************************************************/
  let pantallaActual = 1; // Inicia en la pantalla 1
  mostrarPantalla(pantallaActual);

  function mostrarPantalla(num) {
    const pantallas = document.querySelectorAll('.pantalla');
    pantallas.forEach((p) => p.style.display = 'none');
    const id = '#pantalla' + num;
    const pantalla = document.querySelector(id);
    if(pantalla) pantalla.style.display = 'block';
  }

  function cambiarPantalla(num) {
    pantallaActual = num;
    mostrarPantalla(pantallaActual);
  }

  /*****************************************************
   * 1. OpciÃ³n MÃºltiple
   *****************************************************/
  document.querySelectorAll('.opciones').forEach((grupo) => {
    const correcta = grupo.dataset.correcta;
    const retro = grupo.parentElement.querySelector('.retro');
    grupo.querySelectorAll('.opcion').forEach((op) => {
      op.addEventListener('click', () => {
        if(op.textContent.trim() === correcta){
          retro.textContent = "Â¡Correcto! âœ…";
          retro.classList.add("correcto");
          retro.classList.remove("error");
        } else {
          retro.textContent = "Intenta de nuevo. âŒ";
          retro.classList.add("error");
          retro.classList.remove("correcto");
        }
      });
    });
  });

  /*****************************************************
   * 2. Ã“rbita Interactiva de la Luna
   *****************************************************/
  const luna = document.getElementById('lunaEmoji');
  const orbita = document.getElementById('orbitaContenedor');
  const textoFase = document.getElementById('faseTexto');

  let arrastrandoLuna = false;
  let offsetX = 0, offsetY = 0;

  function obtenerCentro() {
    const rect = orbita.getBoundingClientRect();
    return {
      x: rect.left + rect.width/2,
      y: rect.top + rect.height/2,
      radio: rect.width / 2.2
    };
  }

  function iniciarArrastre(e) {
    e.preventDefault();
    arrastrandoLuna = true;
    if(e.type === 'touchstart') {
      offsetX = e.touches[0].clientX - luna.getBoundingClientRect().left;
      offsetY = e.touches[0].clientY - luna.getBoundingClientRect().top;
    } else {
      offsetX = e.clientX - luna.getBoundingClientRect().left;
      offsetY = e.clientY - luna.getBoundingClientRect().top;
    }
    document.addEventListener('mousemove', moverLuna, {passive: false});
    document.addEventListener('touchmove', moverLuna, {passive: false});
    document.addEventListener('mouseup', soltarLuna);
    document.addEventListener('touchend', soltarLuna);
  }

  function moverLuna(e) {
    if(!arrastrandoLuna) return;
    let clientX, clientY;
    if(e.type === 'touchmove') {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const { x, y, radio } = obtenerCentro();
    const dx = clientX - x - offsetX;
    const dy = clientY - y - offsetY;
    const angulo = Math.atan2(dy, dx);

    const nuevoX = x + radio * Math.cos(angulo);
    const nuevoY = y + radio * Math.sin(angulo);

    const orbitaRect = orbita.getBoundingClientRect();
    luna.style.left = (nuevoX - orbitaRect.left) + 'px';
    luna.style.top  = (nuevoY - orbitaRect.top) + 'px';

    actualizarFaseLunar(angulo);
  }

  function soltarLuna() {
    arrastrandoLuna = false;
    document.removeEventListener('mousemove', moverLuna);
    document.removeEventListener('touchmove', moverLuna);
  }

  function actualizarFaseLunar(rads) {
    let deg = rads * (180/Math.PI);
    if(deg < 0) deg = 360 + deg;

    // Cuatro divisiones ~90Â° cada una
    let fase = "", emoji = "";
    if(deg >= 0 && deg < 90) {
      fase = "Cuarto Creciente";
      emoji = "ğŸŒ“";
    } else if(deg >= 90 && deg < 180) {
      fase = "Luna Llena";
      emoji = "ğŸŒ•";
    } else if(deg >= 180 && deg < 270) {
      fase = "Cuarto Menguante";
      emoji = "ğŸŒ—";
    } else {
      fase = "Luna Nueva";
      emoji = "ğŸŒ‘";
    }
    luna.textContent = emoji;
    textoFase.textContent = `Fase actual: ${fase}`;
  }

  luna.addEventListener('mousedown', iniciarArrastre);
  luna.addEventListener('touchstart', iniciarArrastre, {passive:false});

  /*****************************************************
   * 3 & 4. Drag & Drop para Estaciones y Fases de la Luna
   *****************************************************/
  let itemArrastrado = null;
  document.querySelectorAll('.item-drag').forEach(item => {
    item.addEventListener('dragstart', () => { itemArrastrado = item; });
    item.addEventListener('dragend', () => { itemArrastrado = null; });
  });

  document.querySelectorAll('.zona-drop').forEach(zona => {
    zona.addEventListener('dragover', e => {
      e.preventDefault();
    });
    zona.addEventListener('drop', e => {
      e.preventDefault();
      if(itemArrastrado){
        // Para evitar que desaparezca el elemento, 
        // solo lo colocamos si la zona estÃ¡ vacÃ­a
        if(zona.children.length === 0){
          zona.appendChild(itemArrastrado);
        }
      }
    });
  });

  function checarRelacion(idContenedor, idRetro) {
    const contenedor = document.querySelector(idContenedor);
    const drops = contenedor.querySelectorAll('.zona-drop');
    let correctos = 0;
    drops.forEach(d => {
      const esperado = d.dataset.expect;
      const item = d.querySelector('.item-drag');
      if(item && item.dataset.match === esperado) {
        correctos++;
      }
    });
    const retro = document.querySelector(idRetro);
    if(correctos === drops.length) {
      retro.textContent = "Â¡Correcto! Todas las relaciones coinciden. âœ…";
      retro.classList.add("correcto");
      retro.classList.remove("error");
    } else {
      retro.textContent = "Algunas relaciones no son correctas. âŒ";
      retro.classList.add("error");
      retro.classList.remove("correcto");
    }
  }

  // Checamos cada 3s
  setInterval(() => {
    checarRelacion('#pantalla3', '#retroEstaciones');
    checarRelacion('#pantalla4', '#retroLuna');
  }, 3000);

  /*****************************************************
   * 5 & 8. MÃ¡s OpciÃ³n MÃºltiple (Fechas, DÃ­as de Meses)
   * (Ya manejado por el mismo cÃ³digo de la secciÃ³n 1)
   *****************************************************/

  /*****************************************************
   * 6. Verdadero/Falso
   *****************************************************/
  document.querySelectorAll('.verdadero-falso').forEach(grupo => {
    const correcto = grupo.dataset.correcto;
    const retro = grupo.parentElement.querySelector('.retro');
    grupo.querySelectorAll('.opcion').forEach(op => {
      op.addEventListener('click', () => {
        if(op.textContent.trim() === correcto){
          retro.textContent = "Â¡Correcto! âœ…";
          retro.classList.remove("error");
          retro.classList.add("correcto");
        } else {
          retro.textContent = "Intenta otra vez. âŒ";
          retro.classList.add("error");
          retro.classList.remove("correcto");
        }
      });
    });
  });

  /*****************************************************
   * 7. Reordenar Planetas
   *****************************************************/
  let planetaArrastrado = null;
  document.querySelectorAll('.planeta').forEach(planeta => {
    planeta.addEventListener('dragstart', () => { planetaArrastrado = planeta; });
    planeta.addEventListener('dragend', () => { planetaArrastrado = null; });
  });

  document.querySelectorAll('.espacio-planeta').forEach(slot => {
    slot.addEventListener('dragover', e => {
      e.preventDefault();
    });
    slot.addEventListener('drop', e => {
      e.preventDefault();
      if(planetaArrastrado){
        // Colocamos solo si no hay un elemento ya
        if(slot.children.length === 0){
          slot.appendChild(planetaArrastrado);
        }
      }
    });
  });

  function revisarPlanetas() {
    const slots = document.querySelectorAll('.espacio-planeta');
    let aciertos = 0;
    slots.forEach(s => {
      const esperado = s.dataset.esperado;
      const p = s.querySelector('.planeta');
      if(p && p.dataset.orden === esperado){
        aciertos++;
      }
    });
    const retro = document.getElementById('retroPlanetas');
    if(aciertos === slots.length){
      retro.textContent = "Â¡Planetas en orden correcto! âœ…";
      retro.classList.remove("error");
      retro.classList.add("correcto");
    } else {
      retro.textContent = "Algunos planetas estÃ¡n fuera de lugar. âŒ";
      retro.classList.add("error");
      retro.classList.remove("correcto");
    }
  }

  setInterval(revisarPlanetas, 3000);
  </script>

</body>
</html>
