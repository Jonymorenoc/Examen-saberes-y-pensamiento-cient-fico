<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Ejercicios Interactivos con Tema Espacial</title>
  <style>
    /*****************************************************
     * 1) RESET Y BASE
     *****************************************************/
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow-x: hidden; /* Permite scroll vertical */
    }
    * {
      box-sizing: border-box;
      user-select: none; /* Evita selecciÃ³n de texto */
      -webkit-user-select: none;
      -ms-user-select: none;
    }
    body {
      background: #000; /* Fondo negro espacial */
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      position: relative;
    }

    /*****************************************************
     * 2) CONTENEDOR DE ESTRELLAS ANIMADAS
     *****************************************************/
    #starfield {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 0;
    }
    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: radial-gradient(white, transparent 70%);
      opacity: 0;
      animation: twinkle var(--duration) infinite;
    }
    @keyframes twinkle {
      0%   { opacity: 0; }
      50%  { opacity: 0.8; }
      100% { opacity: 0; }
    }

    /*****************************************************
     * 3) PANTALLAS CENTRADAS
     *****************************************************/
    .pantalla {
      position: relative;
      z-index: 1;
      display: none;
      width: 100%;
      max-width: 480px;
      min-height: 100vh;
      margin: 0 auto;
      padding: 20px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: start;
      text-align: center;
      overflow-y: auto;
    }
    h1, h2, h3 {
      margin: 20px 0 15px;
    }

    /*****************************************************
     * 4) BOTONES (ATRÃS / SIGUIENTE)
     *****************************************************/
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 400px;
      margin-top: 20px;
    }
    .boton {
      background: #2b2b2b;
      color: #fff;
      border: none;
      padding: 12px 25px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.3s;
      min-width: 100px;
    }
    .boton:hover {
      background: #444;
    }

    /*****************************************************
     * 5) RETROALIMENTACIÃ“N
     *****************************************************/
    .retro {
      margin-top: 10px;
      font-weight: bold;
    }
    .error { color: #ff6961; }
    .correcto { color: #77dd77; }

    /*****************************************************
     * 6) OPCIONES DE MÃšLTIPLE ELECCIÃ“N
     *****************************************************/
    .opciones {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 15px 0;
      width: 100%;
      max-width: 300px;
      margin-left: auto;
      margin-right: auto;
    }
    .opcion {
      background: #333;
      padding: 12px;
      border-radius: 4px;
      border: 1px solid #555;
      text-align: center;
      cursor: pointer;
      transition: background 0.2s;
      touch-action: none;
    }
    .opcion:hover,
    .opcion:active {
      background: #444;
    }

    /*****************************************************
     * 7) DRAG & DROP: ÃREAS DE RESPUESTA
     *****************************************************/
    .zona-drag-drop {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 15px 0;
      width: 100%;
      max-width: 400px;
    }
    /* Contenedores de origen: fondo semitransparente */
    .source-container {
      background: rgba(255,255,255,0.05);
      padding: 10px;
      border: 2px dashed #777;
      border-radius: 5px;
    }
    /* Contenedores destino: Ã¡rea visible y fija para drop */
    .target-container {
      background: rgba(255,255,255,0.1);
      padding: 10px;
      border: 2px dashed #aaa;
      border-radius: 5px;
      min-height: 80px;
      width: calc(50% - 10px);
      position: relative;
    }
    .target-header {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .placeholder {
      opacity: 0.6;
      font-size: 0.9rem;
    }
    .item-drag {
      background: #333;
      border: 1px dashed #666;
      border-radius: 5px;
      padding: 10px;
      text-align: center;
      cursor: grab;
      position: relative;
      touch-action: none;
      min-width: 90px;
    }

    /*****************************************************
     * 8) DEMOSTRACIÃ“N DE LA LUNA (Ã“RBITA)
     *****************************************************/
    .orbita-contenedor {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 20px auto;
      background: #222;
      border-radius: 50%;
      box-shadow: inset 0 0 30px rgba(0,0,0,0.3);
    }
    .tierra {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2.2rem;
    }
    .luna {
      position: absolute;
      width: 40px;
      height: 40px;
      font-size: 2rem;
      cursor: pointer;
      transform: translate(-50%, -50%);
      top: 50%;
      left: 90%;
      touch-action: none;
    }

    /*****************************************************
     * 9) SELECCIONAR PLANETAS EN ORDEN
     *****************************************************/
    .contenedor-planetas-seleccion {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin: 15px auto;
      max-width: 350px;
    }
    .boton-planeta {
      background: #333;
      color: #fff;
      border: 1px solid #555;
      border-radius: 4px;
      padding: 8px 15px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .boton-planeta:hover {
      background: #444;
    }
    .boton-planeta.correct {
      background: #0b6;
      color: #fff;
    }
    .boton-planeta.wrong {
      background: #c33;
      color: #fff;
    }
  </style>
</head>
<body>
  <!-- Contenedor para estrellas animadas -->
  <div id="starfield"></div>

  <!-- PANTALLA 1: BIENVENIDA -->
  <section class="pantalla" id="pantalla1">
    <h1>ğŸš€ Bienvenido a los Ejercicios Espaciales</h1>
    <p>Explora el sistema solar, arrastra la Luna, relaciona estaciones, fases y responde ejercicios sobre elasticidad. Â¡DiviÃ©rtete! ğŸ˜ƒğŸŒŒ</p>
    <div class="nav-buttons">
      <span></span>
      <button class="boton" onclick="cambiarPantalla(2)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 2: PREGUNTA MÃšLTIPLE (Luna) -->
  <section class="pantalla" id="pantalla2">
    <h2>Pregunta 1</h2>
    <h3>Â¿De dÃ³nde proviene la luz de la Luna? ğŸŒ™</h3>
    <div class="opciones" data-respuesta="Del Sol">
      <div class="opcion">De la Tierra ğŸŒ</div>
      <div class="opcion">De Marte ğŸ”´</div>
      <div class="opcion">Del Sol â˜€ï¸</div>
      <div class="opcion">De JÃºpiter ğŸª</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(1)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(3)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 3: PREGUNTA MÃšLTIPLE (Estrella mayor) -->
  <section class="pantalla" id="pantalla3">
    <h2>Pregunta 2</h2>
    <h3>Â¿CuÃ¡l es la estrella mÃ¡s grande de nuestro sistema solar? ğŸŒŸ</h3>
    <div class="opciones" data-respuesta="El Sol">
      <div class="opcion">La Luna ğŸŒ™</div>
      <div class="opcion">Saturno ğŸ’«</div>
      <div class="opcion">El Sol â˜€ï¸</div>
      <div class="opcion">Urano ğŸ”µ</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(2)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(4)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 4: PREGUNTA MÃšLTIPLE (NÃºmero de planetas) -->
  <section class="pantalla" id="pantalla4">
    <h2>Pregunta 3</h2>
    <h3>Â¿CuÃ¡ntos planetas giran alrededor del Sol? ğŸª</h3>
    <div class="opciones" data-respuesta="8">
      <div class="opcion">7 ğŸš«</div>
      <div class="opcion">8 âœ…</div>
      <div class="opcion">9 â“</div>
      <div class="opcion">10 ğŸ˜®</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(3)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(5)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 5: RELACIÃ“N DE ESTACIONES (DRAG & DROP) -->
  <section class="pantalla" id="pantalla5">
    <h2>RelaciÃ³n de Estaciones</h2>
    <p>Arrastra cada estaciÃ³n a su recuadro con la pista correspondiente:</p>
    <!-- Contenedor fuente -->
    <div class="zona-drag-drop source-container" id="estacionesSource">
      <div class="item-drag" data-match="Primavera">Primavera ğŸŒ¼</div>
      <div class="item-drag" data-match="Verano">Verano â˜€ï¸</div>
      <div class="item-drag" data-match="OtoÃ±o">OtoÃ±o ğŸ‚</div>
      <div class="item-drag" data-match="Invierno">Invierno â„ï¸</div>
    </div>
    <!-- Contenedor destino: cuatro recuadros (uno por estaciÃ³n) -->
    <div class="zona-drag-drop" id="estacionesDropContainer">
      <div class="target-container" data-expect="Primavera">
        <div class="target-header">Primavera</div>
        <div class="placeholder">Flores y Ã¡rboles verdes ğŸŒ¸</div>
      </div>
      <div class="target-container" data-expect="Verano">
        <div class="target-header">Verano</div>
        <div class="placeholder">NiÃ±os en la playa ğŸ–ï¸</div>
      </div>
      <div class="target-container" data-expect="OtoÃ±o">
        <div class="target-header">OtoÃ±o</div>
        <div class="placeholder">Hojas secas ğŸ</div>
      </div>
      <div class="target-container" data-expect="Invierno">
        <div class="target-header">Invierno</div>
        <div class="placeholder">Nieve y frÃ­o â„ï¸</div>
      </div>
    </div>
    <div class="retro" id="retroEstaciones"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(4)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="revisarRelacionMultiple('estacionesDropContainer','retroEstaciones', ['Primavera','Verano','OtoÃ±o','Invierno'])">Revisar</button>
      <button class="boton" onclick="cambiarPantalla(6)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 6: DEMOSTRACIÃ“N DE LA LUNA (Ã“RBITA) -->
  <section class="pantalla" id="pantalla6">
    <h2>DemostraciÃ³n: Ã“rbita de la Luna</h2>
    <p>Arrastra la Luna alrededor de la Tierra para ver sus fases:</p>
    <div class="orbita-contenedor" id="orbitaContenedor">
      <div class="tierra">ğŸŒ</div>
      <div class="luna" id="lunaEl">ğŸŒ•</div>
    </div>
    <div class="retro" id="retroLuna"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(5)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(7)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 7: RELACIÃ“N DE LAS FASES DE LA LUNA (DRAG & DROP) -->
  <section class="pantalla" id="pantalla7">
    <h2>RelaciÃ³n: Fases de la Luna</h2>
    <p>Arrastra cada <strong>emoji</strong> de la Luna a su recuadro correspondiente:</p>
    <!-- Contenedor fuente -->
    <div class="zona-drag-drop source-container" id="lunaSource">
      <div class="item-drag" data-match="Luna Nueva">ğŸŒ‘</div>
      <div class="item-drag" data-match="Cuarto Creciente">ğŸŒ“</div>
      <div class="item-drag" data-match="Luna Llena">ğŸŒ•</div>
      <div class="item-drag" data-match="Cuarto Menguante">ğŸŒ—</div>
    </div>
    <!-- Contenedor destino: cuatro recuadros para cada fase -->
    <div class="zona-drag-drop" id="fasesDropContainer">
      <div class="target-container" data-expect="Luna Nueva">
        <div class="target-header">Luna Nueva</div>
        <div class="placeholder">Arrastra aquÃ­</div>
      </div>
      <div class="target-container" data-expect="Cuarto Creciente">
        <div class="target-header">Cuarto Creciente</div>
        <div class="placeholder">Arrastra aquÃ­</div>
      </div>
      <div class="target-container" data-expect="Luna Llena">
        <div class="target-header">Luna Llena</div>
        <div class="placeholder">Arrastra aquÃ­</div>
      </div>
      <div class="target-container" data-expect="Cuarto Menguante">
        <div class="target-header">Cuarto Menguante</div>
        <div class="placeholder">Arrastra aquÃ­</div>
      </div>
    </div>
    <div class="retro" id="retroFasesLuna"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(6)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="revisarRelacionMultiple('fasesDropContainer','retroFasesLuna', ['Luna Nueva','Cuarto Creciente','Luna Llena','Cuarto Menguante'])">Revisar</button>
      <button class="boton" onclick="cambiarPantalla(8)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 8: MÃšLTIPLE ELECCIÃ“N (Primavera) -->
  <section class="pantalla" id="pantalla8">
    <h2>Pregunta 4</h2>
    <h3>Â¿CuÃ¡ndo empieza la primavera? ğŸŒ¸</h3>
    <div class="opciones" data-respuesta="20 de marzo">
      <div class="opcion">20 de junio ğŸŒ</div>
      <div class="opcion">20 de marzo ğŸŒ·</div>
      <div class="opcion">23 de septiembre ğŸ</div>
      <div class="opcion">21 de diciembre ğŸ„</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(7)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(9)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 9: MÃšLTIPLE ELECCIÃ“N (OtoÃ±o) -->
  <section class="pantalla" id="pantalla9">
    <h2>Pregunta 5</h2>
    <h3>Â¿CuÃ¡ndo empieza el otoÃ±o? ğŸ</h3>
    <div class="opciones" data-respuesta="23 de septiembre">
      <div class="opcion">21 de junio ğŸŒ</div>
      <div class="opcion">20 de marzo ğŸŒ·</div>
      <div class="opcion">23 de septiembre ğŸ‚</div>
      <div class="opcion">22 de diciembre ğŸ„</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(8)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(10)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 10: VERDADERO/FALSO (Tierra y Sol) -->
  <section class="pantalla" id="pantalla10">
    <h2>Pregunta 6</h2>
    <h3>La Tierra tarda 365 dÃ­as en dar una vuelta al Sol. ğŸŒ</h3>
    <div class="opciones" data-respuesta="Verdadero">
      <div class="opcion">Verdadero âœ…</div>
      <div class="opcion">Falso âŒ</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(9)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(11)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 11: VERDADERO/FALSO (Sol y Tierra) -->
  <section class="pantalla" id="pantalla11">
    <h2>Pregunta 7</h2>
    <h3>El Sol gira alrededor de la Tierra. â˜€ï¸</h3>
    <div class="opciones" data-respuesta="Falso">
      <div class="opcion">Falso âŒ</div>
      <div class="opcion">Verdadero âœ…</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(10)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(12)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 12: SELECCIONAR PLANETAS EN ORDEN -->
  <section class="pantalla" id="pantalla12">
    <h2>Selecciona los Planetas en Orden</h2>
    <p>Toca cada planeta en orden, desde el mÃ¡s cercano al Sol hasta el mÃ¡s lejano.</p>
    <div class="contenedor-planetas-seleccion" id="planetasSeleccion">
      <div class="boton-planeta" data-orden="1">Mercurio ğŸª</div>
      <div class="boton-planeta" data-orden="2">Venus ğŸŒŸ</div>
      <div class="boton-planeta" data-orden="3">Tierra ğŸŒ</div>
      <div class="boton-planeta" data-orden="4">Marte ğŸ”´</div>
      <div class="boton-planeta" data-orden="5">JÃºpiter ğŸŒ™</div>
      <div class="boton-planeta" data-orden="6">Saturno ğŸª</div>
      <div class="boton-planeta" data-orden="7">Urano ğŸ”µ</div>
      <div class="boton-planeta" data-orden="8">Neptuno ğŸ”·</div>
    </div>
    <div class="retro" id="retroPlanetas"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(11)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(13)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 13: MÃšLTIPLE ELECCIÃ“N (Febrero) -->
  <section class="pantalla" id="pantalla13">
    <h2>Pregunta 8</h2>
    <h3>Â¿CuÃ¡ntos dÃ­as tiene febrero en un aÃ±o normal? â“</h3>
    <div class="opciones" data-respuesta="28">
      <div class="opcion">27 ğŸ˜•</div>
      <div class="opcion">28 ğŸ˜ƒ</div>
      <div class="opcion">29 ğŸ˜®</div>
      <div class="opcion">30 ğŸ˜…</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(12)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(14)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 14: MÃšLTIPLE ELECCIÃ“N (Diciembre) -->
  <section class="pantalla" id="pantalla14">
    <h2>Pregunta 9</h2>
    <h3>Â¿CuÃ¡ntos dÃ­as tiene diciembre? â„ï¸</h3>
    <div class="opciones" data-respuesta="31">
      <div class="opcion">28 ğŸ˜•</div>
      <div class="opcion">29 ğŸ˜®</div>
      <div class="opcion">30 ğŸ˜…</div>
      <div class="opcion">31 ğŸ˜ƒ</div>
    </div>
    <div class="retro"></div>
    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(13)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="cambiarPantalla(15)">Siguiente â¡ï¸</button>
    </div>
  </section>

  <!-- PANTALLA 15: EJERCICIO DE PROPIEDAD DE LA ELASTICIDAD (NUEVO DRAG & DROP) -->
  <!-- Este ejercicio ya no es de drag & drop, se reemplaza por mÃºltiples preguntas de opciÃ³n mÃºltiple -->
  <section class="pantalla" id="pantalla15">
    <h2>Ejercicios: Propiedad de la Elasticidad</h2>
    <p>
      El otro dÃ­a mi mamÃ¡ me dio una pluma y, por curiosidad, la abrÃ­. Â¡Sorpresa! TenÃ­a un pequeÃ±o resorte.
      Al estirarlo, volviÃ³ a su forma original. ğŸ˜²âœ¨
    </p>
    <p><strong>La elasticidad</strong> es la capacidad de algunos objetos de estirarse y volver a su forma original. ğŸ”„</p>

    <!-- Pregunta 1 -->
    <div class="pregunta">
      <h3>1. Â¿QuÃ© propiedad se describe en el texto? ğŸŒˆğŸ’¥</h3>
      <div class="opciones" data-respuesta="Elasticidad ğŸ˜ƒ">
        <div class="opcion">Elasticidad ğŸ˜ƒ</div>
        <div class="opcion">Plasticidad ğŸ˜</div>
        <div class="opcion">Rigidez ğŸ˜£</div>
        <div class="opcion">Fragilidad ğŸ˜¢</div>
      </div>
      <div class="retro"></div>
    </div>

    <!-- Pregunta 2 -->
    <div class="pregunta">
      <h3>2. Â¿QuÃ© ocurriÃ³ al estirar la liga? ğŸ¤”ğŸ’ª</h3>
      <div class="opciones" data-respuesta="VolviÃ³ a su forma original âœ…">
        <div class="opcion">VolviÃ³ a su forma original âœ…</div>
        <div class="opcion">Se rompiÃ³ ğŸ’”</div>
        <div class="opcion">Se estirÃ³ permanentemente ğŸ”„</div>
        <div class="opcion">Se encogiÃ³ ğŸ“‰</div>
      </div>
      <div class="retro"></div>
    </div>

    <!-- Pregunta 3 -->
    <div class="pregunta">
      <h3>3. Â¿QuÃ© objeto se menciona en el relato? ğŸ–Šï¸âœ¨</h3>
      <div class="opciones" data-respuesta="Una pluma con resorte ğŸš€">
        <div class="opcion">Una pluma con resorte ğŸš€</div>
        <div class="opcion">Un lÃ¡piz âœï¸</div>
        <div class="opcion">Una goma de borrar ğŸ§½</div>
        <div class="opcion">Una regla ğŸ“</div>
      </div>
      <div class="retro"></div>
    </div>

    <!-- Pregunta 4 -->
    <div class="pregunta">
      <h3>4. Â¿QuÃ© es la elasticidad? ğŸ’¡ğŸŒŸ</h3>
      <div class="opciones" data-respuesta="La capacidad de estirarse y volver a su forma original ğŸ”„">
        <div class="opcion">La capacidad de estirarse y volver a su forma original ğŸ”„</div>
        <div class="opcion">La capacidad de cambiar de forma permanentemente ğŸš€</div>
        <div class="opcion">La capacidad de encogerse rÃ¡pidamente ğŸ“‰</div>
        <div class="opcion">La capacidad de brillar intensamente âœ¨</div>
      </div>
      <div class="retro"></div>
    </div>

    <div class="nav-buttons">
      <button class="boton" onclick="cambiarPantalla(14)">â¬…ï¸ AtrÃ¡s</button>
      <button class="boton" onclick="reiniciar()">Iniciar Otra Vez ğŸ”„</button>
    </div>
  </section>

  <script>
    /*************** A) GENERAR ESTRELLAS ALEATORIAS ***************/
    const starContainer = document.getElementById('starfield');
    const starCount = 50;
    for (let i = 0; i < starCount; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      star.style.top = Math.random() * 100 + 'vh';
      star.style.left = Math.random() * 100 + 'vw';
      const duration = (2 + Math.random() * 2).toFixed(2);
      const delay = (Math.random() * 5).toFixed(2);
      star.style.setProperty('--duration', duration + 's');
      star.style.animationDelay = delay + 's';
      starContainer.appendChild(star);
    }

    /*************** B) CAMBIO DE PANTALLAS ***************/
    let pantallaActual = 1;
    function cambiarPantalla(num) {
      document.querySelectorAll('.pantalla').forEach(p => p.style.display = 'none');
      pantallaActual = num;
      const sel = document.getElementById('pantalla' + num);
      if (sel) sel.style.display = 'flex';
    }
    cambiarPantalla(pantallaActual);

    /*************** C) SHUFFLE (MEZCLAR) ELEMENTOS HIJO ***************/
    function shuffleChildren(parentId) {
      const parent = document.getElementById(parentId);
      if (!parent) return;
      const arr = Array.from(parent.children);
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      arr.forEach(el => parent.appendChild(el));
    }
    window.addEventListener('load', () => {
      // Mezclar opciones de drag & drop
      shuffleChildren('estacionesSource');
      shuffleChildren('lunaSource');
      // Mezclar botones de planetas
      shuffleChildren('planetasSeleccion');
    });

    /*************** D) VALIDACIÃ“N DE OPCIONES MÃšLTIPLE ***************/
    document.querySelectorAll('.opciones').forEach(grupo => {
      const respCorrecta = grupo.dataset.respuesta;
      const retro = grupo.parentElement.querySelector('.retro');
      grupo.querySelectorAll('.opcion').forEach(op => {
        op.addEventListener('click', () => {
          if (op.textContent.trim() === respCorrecta) {
            retro.textContent = "Â¡Correcto! âœ…";
            retro.classList.add('correcto');
            retro.classList.remove('error');
          } else {
            retro.textContent = "Intenta de nuevo. âŒ";
            retro.classList.add('error');
            retro.classList.remove('correcto');
          }
        });
      });
    });

    /*************** E) Ã“RBITA INTERACTIVA DE LA LUNA ***************/
    const luna = document.getElementById('lunaEl');
    const orbita = document.getElementById('orbitaContenedor');
    const retroLuna = document.getElementById('retroLuna');
    let arrastrandoLuna = false;
    let offsetX = 0, offsetY = 0;
    function obtenerCentro() {
      const rect = orbita.getBoundingClientRect();
      return { cx: rect.left + rect.width / 2, cy: rect.top + rect.height / 2, radio: rect.width / 2.3 };
    }
    function iniciarArrastreLuna(e) {
      e.preventDefault();
      arrastrandoLuna = true;
      if (e.type === 'touchstart') {
        offsetX = e.touches[0].clientX - luna.getBoundingClientRect().left;
        offsetY = e.touches[0].clientY - luna.getBoundingClientRect().top;
      } else {
        offsetX = e.clientX - luna.getBoundingClientRect().left;
        offsetY = e.clientY - luna.getBoundingClientRect().top;
      }
      document.addEventListener('pointermove', moverLuna);
      document.addEventListener('pointerup', soltarLuna);
      document.addEventListener('touchmove', moverLuna, { passive: false });
      document.addEventListener('touchend', soltarLuna);
    }
    function moverLuna(e) {
      if (!arrastrandoLuna) return;
      let clientX, clientY;
      if (e.type === 'touchmove') { clientX = e.touches[0].clientX; clientY = e.touches[0].clientY; }
      else { clientX = e.clientX; clientY = e.clientY; }
      const { cx, cy, radio } = obtenerCentro();
      const dx = clientX - cx - offsetX, dy = clientY - cy - offsetY;
      const angulo = Math.atan2(dy, dx);
      const nuevoX = cx + radio * Math.cos(angulo);
      const nuevoY = cy + radio * Math.sin(angulo);
      const rectOrbita = orbita.getBoundingClientRect();
      luna.style.left = (nuevoX - rectOrbita.left) + "px";
      luna.style.top = (nuevoY - rectOrbita.top) + "px";
      actualizarFaseLunar(angulo);
    }
    function soltarLuna() {
      arrastrandoLuna = false;
      document.removeEventListener('pointermove', moverLuna);
      document.removeEventListener('touchmove', moverLuna);
    }
    function actualizarFaseLunar(rads) {
      let deg = rads * (180 / Math.PI);
      if (deg < 0) deg += 360;
      let fase = "", emoji = "";
      if (deg >= 0 && deg < 90) { fase = "Cuarto Creciente"; emoji = "ğŸŒ“"; }
      else if (deg >= 90 && deg < 180) { fase = "Luna Llena"; emoji = "ğŸŒ•"; }
      else if (deg >= 180 && deg < 270) { fase = "Cuarto Menguante"; emoji = "ğŸŒ—"; }
      else { fase = "Luna Nueva"; emoji = "ğŸŒ‘"; }
      luna.textContent = emoji;
      retroLuna.textContent = `Fase actual: ${fase}`;
    }
    luna.addEventListener('pointerdown', iniciarArrastreLuna);
    luna.addEventListener('touchstart', iniciarArrastreLuna, { passive: false });

    /*************** F) DRAG & DROP: GENERAL (para estaciones y fases) ***************/
    let itemArrastrado = null, deltaX_item = 0, deltaY_item = 0;
    document.querySelectorAll('.item-drag').forEach(item => {
      item.addEventListener('pointerdown', e => {
        e.preventDefault();
        itemArrastrado = item;
        deltaX_item = e.clientX - item.getBoundingClientRect().left;
        deltaY_item = e.clientY - item.getBoundingClientRect().top;
        item.setPointerCapture(e.pointerId);
        item.addEventListener('pointermove', moverItem);
        item.addEventListener('pointerup', soltarItem);
      });
    });
    function moverItem(e) {
      if (!itemArrastrado) return;
      let x = e.clientX - deltaX_item, y = e.clientY - deltaY_item;
      itemArrastrado.style.position = 'absolute';
      itemArrastrado.style.zIndex = '999';
      itemArrastrado.style.left = x + 'px';
      itemArrastrado.style.top = y + 'px';
    }
    function soltarItem(e) {
      if (!itemArrastrado) return;
      itemArrastrado.removeEventListener('pointermove', moverItem);
      itemArrastrado.removeEventListener('pointerup', soltarItem);
      let zona = document.elementFromPoint(e.clientX, e.clientY);
      if (zona && zona.classList.contains('zona-drag-drop')) {
        resetPosicion(itemArrastrado);
        zona.appendChild(itemArrastrado);
      } else {
        resetPosicion(itemArrastrado);
      }
      itemArrastrado = null;
    }
    function resetPosicion(item) {
      item.style.position = 'relative';
      item.style.left = '0px';
      item.style.top = '0px';
      item.style.zIndex = '1';
      // Si se desea que regrese a su contenedor original, se puede usar data-origen
      const parentId = item.getAttribute('data-origen');
      if (parentId && !item.parentElement.classList.contains('target-container')) {
        const originalParent = document.getElementById(parentId);
        if (originalParent) originalParent.appendChild(item);
      }
    }
    document.querySelectorAll('.zona-drag-drop').forEach(zona => {
      zona.querySelectorAll('.item-drag').forEach(item => {
        item.setAttribute('data-origen', zona.id);
      });
    });

    /**
     * FunciÃ³n para revisar ejercicios drag & drop con mÃºltiples contenedores de destino.
     * containerId: id del contenedor que contiene todos los target containers.
     * retroId: id donde se muestra la retroalimentaciÃ³n.
     * expected: arreglo con el orden esperado (segÃºn el orden de los target containers).
     */
    function revisarRelacionMultiple(containerId, retroId, expected) {
      const container = document.getElementById(containerId);
      const targets = container.querySelectorAll('.target-container');
      let correct = true;
      if (targets.length !== expected.length) { correct = false; }
      else {
        targets.forEach((target, index) => {
          const dropped = target.querySelector('.item-drag');
          if (!dropped || dropped.getAttribute('data-match') !== expected[index]) {
            correct = false;
          }
        });
      }
      const retro = document.getElementById(retroId);
      if (correct) {
        retro.textContent = "Â¡Perfecto! âœ…";
        retro.classList.remove('error');
        retro.classList.add('correcto');
      } else {
        retro.textContent = "Algunas relaciones no coinciden. âŒ";
        retro.classList.add('error');
        retro.classList.remove('correcto');
      }
    }

    /*************** G) SELECCIONAR PLANETAS EN ORDEN ***************/
    const contPlanetas = document.getElementById('planetasSeleccion');
    const retroPlanetas = document.getElementById('retroPlanetas');
    let nextExpected = 1;
    contPlanetas.querySelectorAll('.boton-planeta').forEach(btn => {
      btn.addEventListener('click', () => {
        const orden = parseInt(btn.dataset.orden);
        if (btn.classList.contains('correct') || btn.classList.contains('wrong')) {
          if (btn.classList.contains('correct')) {
            if (orden === nextExpected - 1) {
              btn.classList.remove('correct');
              nextExpected--;
            } else { return; }
          } else { btn.classList.remove('wrong'); }
        } else {
          if (orden === nextExpected) {
            btn.classList.add('correct');
            nextExpected++;
          } else {
            btn.classList.add('wrong');
          }
        }
        if (nextExpected > 8) {
          retroPlanetas.textContent = "Â¡Has seleccionado todos en el orden correcto! âœ…";
          retroPlanetas.classList.remove('error');
          retroPlanetas.classList.add('correcto');
        } else { retroPlanetas.textContent = ""; }
      });
    });

    /*************** H) BotÃ³n de Reiniciar ***************/
    function reiniciar() {
      location.reload();
    }
  </script>
</body>
</html>
