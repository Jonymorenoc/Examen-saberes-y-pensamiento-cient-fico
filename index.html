<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, 
                 maximum-scale=1.0, user-scalable=no">
  <title>Ejercicios Interactivos</title>
  <style>
    /* ==== Estilos M√≥viles B√°sicos ==== */
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f2f2f2;
      color: #333;
      max-width: 480px;  /* Para visualizaci√≥n en desktop, pero mantenemos enfoque mobile */
      margin: auto;
      padding: 10px;
    }
    h1, h2 {
      text-align: center;
      margin: 20px 0 10px 0;
    }
    .contenedor-ejercicio {
      background: #fff;
      padding: 15px;
      margin: 15px 0;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .contenedor-ejercicio h3 {
      margin-bottom: 10px;
    }
    .retroalimentacion {
      margin-top: 5px;
      font-weight: bold;
    }
    .error {
      color: red;
    }
    .correcto {
      color: green;
    }

    /* ==== Botones grandes para m√≥vil (opci√≥n m√∫ltiple) ==== */
    .opciones {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .opcion {
      background: #e9e9e9;
      padding: 10px;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s;
      text-align: center;
    }
    .opcion:hover {
      background: #dcdcdc;
    }

    /* ==== Verdadero/Falso ==== */
    .verdadero-falso {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 10px;
    }

    /* ==== Drag & Drop: Relacionar columnas ==== */
    .zona-drag-drop {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }
    .item-drag {
      background: #fafafa;
      border: 2px dashed #aaa;
      border-radius: 5px;
      padding: 10px;
      min-width: 100px;
      text-align: center;
      cursor: grab;
    }
    .item-drag:active {
      cursor: grabbing;
    }
    .zona-drop {
      background: #fefefe;
      border: 2px dashed #ddd;
      border-radius: 5px;
      min-height: 40px;
      min-width: 120px;
      padding: 10px;
      text-align: center;
    }

    /* ==== √ìrbita de la Luna (interactiva) ==== */
    .orbita-contenedor {
      position: relative;
      width: 250px;
      height: 250px;
      margin: 20px auto;
      background: #c5e3ff;
      border-radius: 50%;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    }
    .tierra {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
    }
    .luna {
      position: absolute;
      width: 40px; 
      height: 40px;
      font-size: 2rem;
      cursor: pointer;
      user-select: none;
      transform: translate(-50%, -50%);
      /* Posici√≥n inicial (lado derecho) */
      top: 50%;
      left: 90%;
    }

    /* ==== Reordenar Planetas ==== */
    .reordenar-contenedor {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }
    .planeta, .espacio-planeta {
      width: 80%;
      max-width: 300px;
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px;
      text-align: center;
      margin: 0 auto;
    }
    .planeta {
      cursor: grab;
    }
    .planeta:active {
      cursor: grabbing;
    }
  </style>
</head>
<body>

  <h1>Ejercicios Interactivos</h1>

  <!-- ===============================
       1. Opci√≥n m√∫ltiple: Sistema Solar
  ================================ -->
  <div class="contenedor-ejercicio">
    <h2>1. Opci√≥n M√∫ltiple: Sistema Solar</h2>

    <div>
      <h3>¬øDe d√≥nde viene la luz de la Luna?</h3>
      <div class="opciones" data-correcta="Del Sol">
        <div class="opcion">De la Tierra</div>
        <div class="opcion">De Marte</div>
        <div class="opcion">Del Sol</div>
        <div class="opcion">De J√∫piter</div>
      </div>
      <div class="retroalimentacion"></div>
    </div>

    <div>
      <h3>¬øCu√°l es la estrella m√°s grande de nuestro sistema solar?</h3>
      <div class="opciones" data-correcta="El Sol">
        <div class="opcion">La Luna</div>
        <div class="opcion">Saturno</div>
        <div class="opcion">El Sol</div>
        <div class="opcion">Urano</div>
      </div>
      <div class="retroalimentacion"></div>
    </div>

    <div>
      <h3>¬øCu√°ntos planetas giran alrededor del Sol?</h3>
      <div class="opciones" data-correcta="8">
        <div class="opcion">7</div>
        <div class="opcion">8</div>
        <div class="opcion">9</div>
        <div class="opcion">10</div>
      </div>
      <div class="retroalimentacion"></div>
    </div>
  </div>

  <!-- ===============================
       2. Relacionar columnas: Estaciones
  ================================ -->
  <div class="contenedor-ejercicio" id="ejEstaciones">
    <h2>2. Relacionar: Estaciones del A√±o</h2>
    <p>Arrastra la estaci√≥n hacia la descripci√≥n correspondiente:</p>
    <div class="zona-drag-drop">
      <!-- Elementos a arrastrar (estaciones) -->
      <div class="item-drag" draggable="true" data-match="Primavera">Primavera üåº</div>
      <div class="item-drag" draggable="true" data-match="Verano">Verano ‚òÄÔ∏è</div>
      <div class="item-drag" draggable="true" data-match="Oto√±o">Oto√±o üçÇ</div>
      <div class="item-drag" draggable="true" data-match="Invierno">Invierno ‚ùÑÔ∏è</div>
    </div>
    <div class="zona-drag-drop">
      <!-- Zonas de drop (descripciones) -->
      <div class="zona-drop" data-expect="Primavera">[√Årboles floreciendo]</div>
      <div class="zona-drop" data-expect="Verano">[Ni√±os en la playa]</div>
      <div class="zona-drop" data-expect="Oto√±o">[Hojas secas]</div>
      <div class="zona-drop" data-expect="Invierno">[Nieve]</div>
    </div>
    <div class="retroalimentacion" id="estacionesRetro"></div>
  </div>

  <!-- ===============================
       3. Relacionar columnas: Fases de la Luna
  ================================ -->
  <div class="contenedor-ejercicio" id="ejFasesLuna">
    <h2>3. Relacionar: Fases de la Luna</h2>
    <p>Arrastra el nombre de la fase a su emoji:</p>
    <div class="zona-drag-drop">
      <div class="item-drag" draggable="true" data-match="Luna Nueva">Luna Nueva</div>
      <div class="item-drag" draggable="true" data-match="Cuarto Creciente">Cuarto Creciente</div>
      <div class="item-drag" draggable="true" data-match="Luna Llena">Luna Llena</div>
      <div class="item-drag" draggable="true" data-match="Cuarto Menguante">Cuarto Menguante</div>
    </div>
    <div class="zona-drag-drop">
      <div class="zona-drop" data-expect="Luna Nueva">üåë</div>
      <div class="zona-drop" data-expect="Cuarto Creciente">üåì</div>
      <div class="zona-drop" data-expect="Luna Llena">üåï</div>
      <div class="zona-drop" data-expect="Cuarto Menguante">üåó</div>
    </div>
    <div class="retroalimentacion" id="lunaRetro"></div>
  </div>

  <!-- ===============================
       4. Verdadero / Falso
  ================================ -->
  <div class="contenedor-ejercicio">
    <h2>4. Verdadero o Falso</h2>
    <div>
      <h3>La Tierra tarda 365 d√≠as en dar una vuelta al Sol.</h3>
      <div class="verdadero-falso" data-correcto="Verdadero">
        <div class="opcion">Verdadero</div>
        <div class="opcion">Falso</div>
      </div>
      <div class="retroalimentacion"></div>
    </div>
    <div>
      <h3>El Sol gira alrededor de la Tierra.</h3>
      <div class="verdadero-falso" data-correcto="Falso">
        <div class="opcion">Falso</div>
        <div class="opcion">Verdadero</div>
      </div>
      <div class="retroalimentacion"></div>
    </div>
  </div>

  <!-- ===============================
       5. Reordenar Planetas
  ================================ -->
  <div class="contenedor-ejercicio">
    <h2>5. Ordenar Planetas</h2>
    <p>Arrastra los planetas en orden desde el m√°s cercano al Sol hasta el m√°s lejano:</p>
    <div class="reordenar-contenedor">
      <div class="planeta" draggable="true" data-orden="1">Mercurio</div>
      <div class="planeta" draggable="true" data-orden="2">Venus</div>
      <div class="planeta" draggable="true" data-orden="3">Tierra</div>
      <div class="planeta" draggable="true" data-orden="4">Marte</div>
      <div class="planeta" draggable="true" data-orden="5">J√∫piter</div>
      <div class="planeta" draggable="true" data-orden="6">Saturno</div>
      <div class="planeta" draggable="true" data-orden="7">Urano</div>
      <div class="planeta" draggable="true" data-orden="8">Neptuno</div>
    </div>
    <br>
    <div class="reordenar-contenedor">
      <div class="espacio-planeta" data-esperado="1">Slot 1</div>
      <div class="espacio-planeta" data-esperado="2">Slot 2</div>
      <div class="espacio-planeta" data-esperado="3">Slot 3</div>
      <div class="espacio-planeta" data-esperado="4">Slot 4</div>
      <div class="espacio-planeta" data-esperado="5">Slot 5</div>
      <div class="espacio-planeta" data-esperado="6">Slot 6</div>
      <div class="espacio-planeta" data-esperado="7">Slot 7</div>
      <div class="espacio-planeta" data-esperado="8">Slot 8</div>
    </div>
    <div class="retroalimentacion" id="planetasRetro"></div>
  </div>

  <!-- ===============================
       6. √ìrbita Interactiva de la Luna
  ================================ -->
  <div class="contenedor-ejercicio">
    <h2>6. √ìrbita Interactiva de la Luna</h2>
    <p>Arrastra la Luna alrededor de la Tierra para ver las fases:</p>
    <div class="orbita-contenedor" id="orbitaContenedor">
      <div class="tierra">üåç</div>
      <div class="luna" id="lunaEmoji">üåï</div>
    </div>
    <div class="retroalimentacion" id="faseTexto"></div>
  </div>

  <script>
  /*************************************
   * 1. Opci√≥n M√∫ltiple
   *************************************/
  document.querySelectorAll('.opciones').forEach((opcionesBlock) => {
    const respCorrecta = opcionesBlock.dataset.correcta;
    const retro = opcionesBlock.parentElement.querySelector('.retroalimentacion');
    opcionesBlock.querySelectorAll('.opcion').forEach((opcion) => {
      opcion.addEventListener('click', () => {
        if(opcion.textContent.trim() === respCorrecta){
          retro.textContent = "¬°Correcto!";
          retro.classList.add("correcto");
          retro.classList.remove("error");
        } else {
          retro.textContent = "Int√©ntalo de nuevo.";
          retro.classList.add("error");
          retro.classList.remove("correcto");
        }
      });
    });
  });

  /*************************************
   * 2 & 3. Relacionar columnas (Drag/Drop)
   *************************************/
  let itemArrastrado = null;

  // Al iniciar el arrastre
  document.querySelectorAll('.item-drag').forEach((item) => {
    item.addEventListener('dragstart', (e) => {
      itemArrastrado = item;
    });
    item.addEventListener('dragend', (e) => {
      itemArrastrado = null;
    });
  });

  // Zonas de Drop
  document.querySelectorAll('.zona-drop').forEach((zona) => {
    zona.addEventListener('dragover', (e) => {
      e.preventDefault();  // Permitir drop
    });
    zona.addEventListener('drop', (e) => {
      e.preventDefault();
      if(itemArrastrado){
        // Si ya ten√≠a algo adentro, lo reemplaza (opcional)
        if(zona.children.length === 1){
          zona.innerHTML = '';
        }
        zona.appendChild(itemArrastrado);
      }
    });
  });

  // Funci√≥n para checar si todo est√° correcto
  function checarRelacion(contenedorID, retroID, tipoData) {
    const contenedor = document.querySelector(contenedorID);
    const drops = contenedor.querySelectorAll('.zona-drop');
    let bien = 0;
    drops.forEach((drop) => {
      const esperado = drop.dataset.expect;
      const itemDentro = drop.querySelector('.item-drag');
      if(itemDentro && itemDentro.dataset.match === esperado){
        bien++;
      }
    });
    const retro = document.querySelector(retroID);
    if(bien === drops.length){
      retro.textContent = "¬°Todas las correspondencias son correctas!";
      retro.classList.remove("error");
      retro.classList.add("correcto");
    } else {
      retro.textContent = "Algunas relaciones no coinciden. Sigue intentando.";
      retro.classList.add("error");
      retro.classList.remove("correcto");
    }
  }

  // Revisi√≥n cada 3s o con un bot√≥n si gustas
  setInterval(() => {
    checarRelacion('#ejEstaciones', '#estacionesRetro', 'season');
    checarRelacion('#ejFasesLuna', '#lunaRetro', 'fase');
  }, 3000);

  /*************************************
   * 4. Verdadero/Falso
   *************************************/
  document.querySelectorAll('.verdadero-falso').forEach((vfBlock) => {
    const correcto = vfBlock.dataset.correcto;
    const retro = vfBlock.parentElement.querySelector('.retroalimentacion');
    vfBlock.querySelectorAll('.opcion').forEach((op) => {
      op.addEventListener('click', () => {
        if(op.textContent.trim() === correcto){
          retro.textContent = "¬°Correcto!";
          retro.classList.remove("error");
          retro.classList.add("correcto");
        } else {
          retro.textContent = "Int√©ntalo de nuevo.";
          retro.classList.add("error");
          retro.classList.remove("correcto");
        }
      });
    });
  });

  /*************************************
   * 5. Reordenar Planetas
   *************************************/
  let planetaArrastrado = null;
  document.querySelectorAll('.planeta').forEach((planeta) => {
    planeta.addEventListener('dragstart', () => {
      planetaArrastrado = planeta;
    });
    planeta.addEventListener('dragend', () => {
      planetaArrastrado = null;
    });
  });

  document.querySelectorAll('.espacio-planeta').forEach((espacio) => {
    espacio.addEventListener('dragover', (e) => {
      e.preventDefault();
    });
    espacio.addEventListener('drop', (e) => {
      e.preventDefault();
      if(planetaArrastrado){
        // Reemplazar si ya exist√≠a algo
        if(espacio.children.length === 1){
          espacio.innerHTML = '';
        }
        espacio.appendChild(planetaArrastrado);
      }
    });
  });

  function checarPlanetas() {
    const slots = document.querySelectorAll('.espacio-planeta');
    let aciertos = 0;
    slots.forEach((slot) => {
      const esperado = slot.dataset.esperado;
      const actual = slot.querySelector('.planeta');
      if(actual && actual.dataset.orden === esperado){
        aciertos++;
      }
    });
    const retroPlanetas = document.getElementById('planetasRetro');
    if(aciertos === slots.length){
      retroPlanetas.textContent = "¬°Todos los planetas est√°n en el orden correcto!";
      retroPlanetas.classList.remove("error");
      retroPlanetas.classList.add("correcto");
    } else {
      retroPlanetas.textContent = "Algunos planetas no est√°n en el orden correcto.";
      retroPlanetas.classList.add("error");
      retroPlanetas.classList.remove("correcto");
    }
  }
  setInterval(checarPlanetas, 3000);

  /*************************************
   * 6. √ìrbita Interactiva de la Luna
   *************************************/
  const luna = document.getElementById('lunaEmoji');
  const orbita = document.getElementById('orbitaContenedor');
  const textoFase = document.getElementById('faseTexto');

  let tocando = false;
  let offsetX = 0, offsetY = 0;

  // Para centrar c√°lculos
  function obtenerCentro() {
    const rect = orbita.getBoundingClientRect();
    return {
      x: rect.left + rect.width / 2,
      y: rect.top + rect.height / 2,
      radio: rect.width / 2.2
    };
  }

  function iniciarArrastre(e) {
    e.preventDefault();
    tocando = true;
    if(e.type === 'touchstart'){
      offsetX = e.touches[0].clientX - luna.getBoundingClientRect().left;
      offsetY = e.touches[0].clientY - luna.getBoundingClientRect().top;
    } else {
      offsetX = e.clientX - luna.getBoundingClientRect().left;
      offsetY = e.clientY - luna.getBoundingClientRect().top;
    }
    document.addEventListener('mousemove', moverLuna);
    document.addEventListener('touchmove', moverLuna, {passive:false});
    document.addEventListener('mouseup', soltarLuna);
    document.addEventListener('touchend', soltarLuna);
  }

  function moverLuna(e) {
    if(!tocando) return;
    let clientX, clientY;
    if(e.type === 'touchmove'){
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    const {x, y, radio} = obtenerCentro();
    const dx = clientX - x - offsetX;
    const dy = clientY - y - offsetY;
    const angulo = Math.atan2(dy, dx);  // En radianes

    // Calcular nueva posici√≥n en el c√≠rculo
    const nuevoX = x + radio * Math.cos(angulo);
    const nuevoY = y + radio * Math.sin(angulo);

    // Aplicar a la Luna
    luna.style.left = (nuevoX - orbita.getBoundingClientRect().left) + 'px';
    luna.style.top = (nuevoY - orbita.getBoundingClientRect().top) + 'px';

    actualizarFaseLunar(angulo);
  }

  function soltarLuna() {
    tocando = false;
    document.removeEventListener('mousemove', moverLuna);
    document.removeEventListener('touchmove', moverLuna);
  }

  function actualizarFaseLunar(rads) {
    // Convertir √°ngulo de [-180, 180] en grados a [0..360)
    let deg = rads * (180 / Math.PI);
    if(deg < 0) deg = 360 + deg;

    // Dividir el c√≠rculo en 4 secciones (90¬∞ cada una)
    let fase = "";
    let emoji = "";
    if(deg >= 0 && deg < 90) {
      fase = "Cuarto Creciente";
      emoji = "üåì";
    } else if(deg >= 90 && deg < 180) {
      fase = "Luna Llena";
      emoji = "üåï";
    } else if(deg >= 180 && deg < 270) {
      fase = "Cuarto Menguante";
      emoji = "üåó";
    } else {
      fase = "Luna Nueva";
      emoji = "üåë";
    }

    // Cambiar el emoji y el texto
    luna.textContent = emoji;
    textoFase.textContent = "Fase actual: " + fase;
  }

  // Listeners para arrastre de la Luna
  luna.addEventListener('mousedown', iniciarArrastre);
  luna.addEventListener('touchstart', iniciarArrastre, {passive:false});
  </script>
</body>
</html>
